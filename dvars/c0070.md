---
title: "load file using dvar"
date: 2020-09-18T00:51:30+99:00
draft: false
weight: 800

---

##### Showcase dvar ref mechanism could be used to load file


### load a plain file using dvar


This demo shows that the ref element in dvar could be used to load a plain text file and the file does not have to be a template file

This could be used as one style for file loading











### Demo








[source](https://github.com/upcmd/up/blob/master/tests/functests/c0070.yml)

##### Main task yaml file
```
    dvars:
    - name: mystory
      ref: d0070.txt
    tasks:
    - name: task
      task:
      - func: shell
        do:
        - echo """school address {{.mystory}}""" > /tmp/mystory.txt
        - cat /tmp/mystory.txt
    
```
##### Main log file
```
    loading [Config]:  ./tests/functests/upconfig.yml
    Main config:
                 Version -> 1.0.0
                  RefDir -> ./tests/functests
                 WorkDir -> cwd
              AbsWorkDir -> /up_project/up
                TaskFile -> c0070
                 Verbose -> vvv
              ModuleName -> self
               ShellType -> /bin/sh
           MaxCallLayers -> 8
                 Timeout -> 3600000
     MaxModuelCallLayers -> 256
               EntryTask -> task
    work dir: /up_project/up
    -exec task: task
    loading [Task]:  ./tests/functests/c0070
    module: [self], instance id: [dev], exec profile: []
    profile -  envVars:
    
    (*core.Cache)({
    })
    
    Task1: [task ==> task:  ]
    -Step1:
    self: final context exec vars:
    
    (*core.Cache)({
      "mystory": "  Once when I was six years old I saw a magnificent picture in a book, called True Stories from Nature, about the primeval forest. It was a picture of a boa constrictor in the act of swallowing an animal. Here is a copy of the drawing.\n\n    boa constrictor swallowing an animal\n  In the book it said: \"Boa constrictors swallow their prey whole, without chewing it. After that they are not able to move, and they sleep through the six months that they need for digestion.\"\n\n  I pondered deeply, then, over the adventures of the jungle. And after some work with a colored pencil I succeeded in making my first drawing. My Drawing Number One. It looked something like this:\n\n    Drawing Number One\n    I showed my masterpiece to the grown-ups, and asked them whether the drawing frightened them.\n\n  But they answered: \"Frighten? Why should any one be frightened by a hat?\"\n\n  My drawing was not a picture of a hat. It was a picture of a boa constrictor digesting an elephant. But since the grown-ups were not able to understand it, I made another drawing: I drew the inside of a boa constrictor, so that the grown-ups could see it clearly. They always need to have things explained. My Drawing Number Two looked like this:w",
      "up_runtime_task_layer_number": 0
    })
    
    cmd( 1):
    echo """school address {{.mystory}}""" > /tmp/mystory.txt
    
    -
    
    -
     .. ok
    cmd( 2):
    cat /tmp/mystory.txt
    
    -
    school address   Once when I was six years old I saw a magnificent picture in a book, called True Stories from Nature, about the primeval forest. It was a picture of a boa constrictor in the act of swallowing an animal. Here is a copy of the drawing.
    
        boa constrictor swallowing an animal
      In the book it said: Boa constrictors swallow their prey whole, without chewing it. After that they are not able to move, and they sleep through the six months that they need for digestion.
    
      I pondered deeply, then, over the adventures of the jungle. And after some work with a colored pencil I succeeded in making my first drawing. My Drawing Number One. It looked something like this:
    
        Drawing Number One
        I showed my masterpiece to the grown-ups, and asked them whether the drawing frightened them.
    
      But they answered: Frighten? Why should any one be frightened by a hat?
    
      My drawing was not a picture of a hat. It was a picture of a boa constrictor digesting an elephant. But since the grown-ups were not able to understand it, I made another drawing: I drew the inside of a boa constrictor, so that the grown-ups could see it clearly. They always need to have things explained. My Drawing Number Two looked like this:w
    
    -
     .. ok
    . ok
    
```


##### Logs with different verbose level
* [c0070 log - verbose level v](../../logs/c0070_v)
* [c0070 log - verbose level vv](../../logs/c0070_vv)
* [c0070 log - verbose level vvv](../../logs/c0070_vvvv)
* [c0070 log - verbose level vvvv](../../logs/c0070_vvvv)
* [c0070 log - verbose level vvvvv](../../logs/c0070_vvvvv)

##### Raw logs with different verbose level
* [c0070 raw log - verbose level v](../../reflogs/c0070_v.log)
* [c0070 raw log - verbose level vv](../../reflogs/c0070_vv.log)
* [c0070 raw log - verbose level vvv](../../reflogs/c0070_vvv.log)
* [c0070 raw log - verbose level vvvv](../../reflogs/c0070_vvvv.log)
* [c0070 raw log - verbose level vvvvv](../../reflogs/c0070_vvvvv.log)







